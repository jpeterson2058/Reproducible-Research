Reproducible Research Project I - Analyzing FitBit Data

Joshua Peterson
June, 2016
===============================

<About>

<p>This was the first project for the Reproducible Research course in Coursera's Data Science specialization track. The purpose of the project was to answer a series of questions using data collected from a FitBit.</p>

# Load data

## Read csv data file
<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">activity_data</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl str">&quot;activity.csv&quot;</span><span class="hl std">)</span>
</pre></div>
</div></div>

# Problem 1: What is the mean total number of steps taken per day?

## Sum Steps by Day|Create Histogram|Calculate Mean and Median
<div class="chunk" id="unnamed-chunk-2"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">steps_day</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">aggregate</span><span class="hl std">(steps</span> <span class="hl opt">~</span> <span class="hl std">date, activity_data, sum)</span>
<span class="hl kwd">hist</span><span class="hl std">(steps_day</span><span class="hl opt">$</span><span class="hl std">steps,</span> <span class="hl kwc">main</span> <span class="hl std">=</span> <span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Total Steps Each Day&quot;</span><span class="hl std">),</span> <span class="hl kwc">col</span><span class="hl std">=</span><span class="hl str">&quot;blue&quot;</span><span class="hl std">,</span> <span class="hl kwc">xlab</span><span class="hl std">=</span><span class="hl str">&quot;Number of Steps&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-2-1.png" title="plot of chunk unnamed-chunk-2" alt="plot of chunk unnamed-chunk-2" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Mean Steps/Day=&quot;</span><span class="hl std">,</span> <span class="hl kwd">mean</span><span class="hl std">(steps_day</span><span class="hl opt">$</span><span class="hl std">steps))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Mean Steps/Day= 10766.1886792453&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Median Steps/Day=&quot;</span><span class="hl std">,</span> <span class="hl kwd">median</span><span class="hl std">(steps_day</span><span class="hl opt">$</span><span class="hl std">steps))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Median Steps/Day= 10765&quot;
</pre></div>
</div></div>

# Problem 2: What is the average daily activity pattern?

1. Calculate average steps for each interval for all days.
2. Plot the Average Number of Steps/Day by Interval
3. Find interval with most average steps
<div class="chunk" id="unnamed-chunk-3"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">steps_interval</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">aggregate</span><span class="hl std">(steps</span> <span class="hl opt">~</span> <span class="hl std">interval, activity_data, mean)</span>

<span class="hl kwd">plot</span><span class="hl std">(steps_interval</span><span class="hl opt">$</span><span class="hl std">interval, steps_interval</span><span class="hl opt">$</span><span class="hl std">steps,</span> <span class="hl kwc">type</span><span class="hl std">=</span><span class="hl str">&quot;l&quot;</span><span class="hl std">,</span> <span class="hl kwc">xlab</span><span class="hl std">=</span><span class="hl str">&quot;Interval&quot;</span><span class="hl std">,</span> <span class="hl kwc">ylab</span><span class="hl std">=</span><span class="hl str">&quot;Number of Steps&quot;</span><span class="hl std">,</span> <span class="hl kwc">main</span><span class="hl std">=</span><span class="hl str">&quot;Average Number of Steps/Day by Interval&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-3-1.png" title="plot of chunk unnamed-chunk-3" alt="plot of chunk unnamed-chunk-3" class="plot" /></div></div>

## Interval with max number of steps
<div class="chunk" id="unnamed-chunk-4"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">max_interval</span><span class="hl kwb">&lt;-</span> <span class="hl std">steps_interval[</span><span class="hl kwd">which.max</span><span class="hl std">(steps_interval</span><span class="hl opt">$</span><span class="hl std">steps),</span><span class="hl num">1</span><span class="hl std">]</span>
<span class="hl std">max_interval</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 835
</pre></div>
</div></div>

# Problem 3: Impute missing values and compare to non-imputed data.

## Missing data needed to be imputed
<div class="chunk" id="unnamed-chunk-5"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">incomplete_data</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">sum</span><span class="hl std">(</span><span class="hl opt">!</span><span class="hl kwd">complete.cases</span><span class="hl std">(activity_data))</span>
<span class="hl std">imputed_data</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">transform</span><span class="hl std">(activity_data,</span> <span class="hl kwc">steps</span> <span class="hl std">=</span> <span class="hl kwd">ifelse</span><span class="hl std">(</span><span class="hl kwd">is.na</span><span class="hl std">(activity_data</span><span class="hl opt">$</span><span class="hl std">steps), steps_interval</span><span class="hl opt">$</span><span class="hl std">steps[</span><span class="hl kwd">match</span><span class="hl std">(activity_data</span><span class="hl opt">$</span><span class="hl std">interval, steps_interval</span><span class="hl opt">$</span><span class="hl std">interval)], activity_data</span><span class="hl opt">$</span><span class="hl std">steps))</span>
</pre></div>
</div></div>

## Zeros imputed for start date of 10.01.2012.  Would have been 9,000 steps higher the proceeding day of 126 steps.  NAs assumed to be 0 to fit trend.
<div class="chunk" id="unnamed-chunk-6"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">imputed_data[</span><span class="hl kwd">as.character</span><span class="hl std">(imputed_data</span><span class="hl opt">$</span><span class="hl std">date)</span> <span class="hl opt">==</span> <span class="hl str">&quot;2012.10.01&quot;</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">]</span> <span class="hl kwb">&lt;-</span><span class="hl num">0</span>
</pre></div>
</div></div>

## Re-count total steps by day and create histogram.
<div class="chunk" id="unnamed-chunk-7"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">steps_day_II</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">aggregate</span><span class="hl std">(steps</span> <span class="hl opt">~</span> <span class="hl std">date, imputed_data, sum)</span>
<span class="hl kwd">hist</span><span class="hl std">(steps_day_II</span><span class="hl opt">$</span><span class="hl std">steps,</span> <span class="hl kwc">main</span> <span class="hl std">=</span> <span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Total Steps Each Day&quot;</span><span class="hl std">),</span> <span class="hl kwc">col</span><span class="hl std">=</span><span class="hl str">&quot;blue&quot;</span><span class="hl std">,</span> <span class="hl kwc">xlab</span><span class="hl std">=</span><span class="hl str">&quot;Number of Steps&quot;</span><span class="hl std">)</span>
<span class="hl kwd">hist</span><span class="hl std">(steps_day</span><span class="hl opt">$</span><span class="hl std">steps,</span> <span class="hl kwc">main</span><span class="hl std">=</span> <span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Total Steps Each Day&quot;</span><span class="hl std">),</span> <span class="hl kwc">col</span><span class="hl std">=</span><span class="hl str">&quot;red&quot;</span><span class="hl std">,</span> <span class="hl kwc">xlab</span><span class="hl std">=</span><span class="hl str">&quot;Number of Steps&quot;</span><span class="hl std">,</span> <span class="hl kwc">add</span><span class="hl std">=T)</span>
<span class="hl kwd">legend</span><span class="hl std">(</span><span class="hl str">&quot;topright&quot;</span><span class="hl std">,</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Imputed&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Non_imputed&quot;</span><span class="hl std">),</span> <span class="hl kwc">col</span><span class="hl std">=</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;blue&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;red&quot;</span><span class="hl std">),</span> <span class="hl kwc">lwd</span><span class="hl std">=</span><span class="hl num">10</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-7-1.png" title="plot of chunk unnamed-chunk-7" alt="plot of chunk unnamed-chunk-7" class="plot" /></div></div>

## New mean and median for imputed data.
<div class="chunk" id="unnamed-chunk-8"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Imputed Data Mean Steps/Day=&quot;</span><span class="hl std">,</span> <span class="hl kwd">mean</span><span class="hl std">(steps_day_II</span><span class="hl opt">$</span><span class="hl std">steps))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Imputed Data Mean Steps/Day= 10766.1886792453&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Imputed Data Median Steps/Day=&quot;</span><span class="hl std">,</span> <span class="hl kwd">median</span><span class="hl std">(steps_day_II</span><span class="hl opt">$</span><span class="hl std">steps))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Imputed Data Median Steps/Day= 10766.1886792453&quot;
</pre></div>
</div></div>

## Total difference
<div class="chunk" id="unnamed-chunk-9"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Total difference=&quot;</span><span class="hl std">,</span> <span class="hl kwd">sum</span><span class="hl std">(steps_day_II</span><span class="hl opt">$</span><span class="hl std">steps)</span> <span class="hl opt">-</span> <span class="hl kwd">sum</span><span class="hl std">(steps_day</span><span class="hl opt">$</span><span class="hl std">steps))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Total difference= 86129.5094339623&quot;
</pre></div>
</div></div>

# Problem 4: Are there differnces in activity patterns between weekdays and weekends?

### Create plot to compare and constrast activity on weekdays and weekends.
<div class="chunk" id="unnamed-chunk-10"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">weekdays</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Monday&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Tuesday&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Wednesday&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Thursday&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Friday&quot;</span><span class="hl std">)</span>
<span class="hl std">imputed_data</span><span class="hl opt">$</span><span class="hl std">dow</span> <span class="hl kwb">=</span> <span class="hl kwd">as.factor</span><span class="hl std">(</span><span class="hl kwd">ifelse</span><span class="hl std">(</span><span class="hl kwd">is.element</span><span class="hl std">(</span><span class="hl kwd">weekdays</span><span class="hl std">(</span><span class="hl kwd">as.Date</span><span class="hl std">(imputed_data</span><span class="hl opt">$</span><span class="hl std">date)), weekdays),</span> <span class="hl str">&quot;Weekday&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Weekend&quot;</span><span class="hl std">))</span>
<span class="hl std">steps_interval_II</span><span class="hl kwb">&lt;-</span> <span class="hl kwd">aggregate</span><span class="hl std">(steps</span> <span class="hl opt">~</span> <span class="hl std">interval</span> <span class="hl opt">+</span> <span class="hl std">dow, imputed_data, mean)</span>
<span class="hl kwd">library</span><span class="hl std">(lattice)</span>
<span class="hl kwd">xyplot</span><span class="hl std">(steps_interval_II</span><span class="hl opt">$</span><span class="hl std">steps</span> <span class="hl opt">~</span> <span class="hl std">steps_interval_II</span><span class="hl opt">$</span><span class="hl std">interval</span><span class="hl opt">|</span><span class="hl std">steps_interval_II</span><span class="hl opt">$</span><span class="hl std">dow,</span> <span class="hl kwc">main</span><span class="hl std">=</span><span class="hl str">&quot;Average Steps per Day by Interval&quot;</span><span class="hl std">,</span><span class="hl kwc">xlab</span><span class="hl std">=</span><span class="hl str">&quot;Interval&quot;</span><span class="hl std">,</span> <span class="hl kwc">ylab</span><span class="hl std">=</span><span class="hl str">&quot;Steps&quot;</span><span class="hl std">,</span><span class="hl kwc">layout</span><span class="hl std">=</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span><span class="hl num">2</span><span class="hl std">),</span> <span class="hl kwc">type</span><span class="hl std">=</span><span class="hl str">&quot;l&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-10-1.png" title="plot of chunk unnamed-chunk-10" alt="plot of chunk unnamed-chunk-10" class="plot" /></div></div>


</body>
</html>
